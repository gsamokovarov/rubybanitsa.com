<% e = EventInfo.new(event) %>

<% title e.human_date %>

<%= render 'events/ogp', e: e %>

<%= render jobs, highlight: true if e.upcoming? %>

<article class="event">
  <h1 class="<%= :upcoming if e.upcoming? && !jobs %>">
    <%= e.human_date %>
    <%= " (IN #{time_ago_in_words(e.time)})" if e.upcoming? %>
  </h1>

  <%= render_markdown e.description %>

  <h2><%= e.venue %> at <time><%= e.human_time %></time></h2>

  <% if e.venue_directions.present? %>
    <p><%= e.venue_directions %></p>
  <% end %>

  <% unless e.online? %>
    <%= map_tag event %>
    <address><%= e.address %></address>
  <% end %>

  <% if e.still_online? %>
    <%= link_to "Join us online", e.online_url, class: 'primary' %>
    <%= link_to "Add to calendar", event_path(event, format: 'ics'), class: 'secondary' %>
  <% end %>

  <% if e.talks.present? %>
    <h2>Talks</h2>

    <%= render e.talks %>
  <% end %>

  <% if e.links? %>
    <footer>
      <% if e.facebook_url.present? %>
        <%= link_to 'Facebook', e.facebook_url %>
      <% end %>
    </footer>
  <% end %>
</article>
