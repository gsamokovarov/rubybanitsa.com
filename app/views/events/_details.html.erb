<% e = EventInfo.new(event) %>

<% title e.human_date %>

<%= render 'events/ogp', e: e %>

<%= render jobs, highlight: true if e.upcoming? %>

<article class="event">
  <h1 class="<%= :upcoming if e.upcoming? && !jobs %>">
    <%= e.title %>
    <%= " (IN #{time_ago_in_words(e.time)})" if e.upcoming? %>
  </h1>

  <%= render_markdown e.description %>

  <% if e.talks.present? %>
    <h2>Talks</h2>

    <%= render e.talks %>
  <% end %>

  <% if e.sponsorships.any? %>
    <h2>Thanks to</h2>

    <% e.companies.each do |company| %>
      <h3><%= company.name %></h3>
      <p><%= company.description %></p>
    <% end %>
  <% end %>

  <h2><%= e.venue %> at <time><%= e.human_time %></time> (<%= e.time.time_zone.name %>)</h2>

  <% if e.venue_directions.present? %>
    <p><%= e.venue_directions %></p>
  <% end %>

  <% unless e.online_only_venue? %>
    <%= map_tag event %>
    <address><%= e.address %></address>
  <% end %>

  <% if e.joinable? %>
    <%= link_to "Join us online", join_url, class: 'primary' %>
  <% else %>
    <%= link_to "Add to calendar", event_path(event, format: 'ics'), class: 'primary' %>
  <% end %>

  <% if e.links? %>
    <footer>
      <% if e.facebook_url.present? %>
        <%= link_to 'Facebook', e.facebook_url %>
      <% end %>
    </footer>
  <% end %>
</article>
